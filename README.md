# Set Protocol V2 Subgraph

## Install

1. `yarn install`
2. (If deploying to hosted service) `yarn graph auth https://api.thegraph.com/deploy/ <ACCESS_TOKEN>`
3. (If Set Protocol contract ABI changed) `yarn generate-abis`

## Commands

`yarn build`

Compile subgraph

`yarn deploy`

Deploy to hosted service

`yarn deploy-local`

Deploy to local Graph node

`yarn lint`

Format code

`yarn generate-abis`

Pull contract ABIs from Set Protocol V2 repo (only needed if changed)

## Reference

[Discord: Index Co-op #set-subgraph](https://discord.gg/8FYPP7ebbw)

[Subgraph Plan](https://docs.google.com/spreadsheets/d/1I3sk1kvfCPnnrUUCiBa35DZneeTx0vtGk04B-rKCJVE/edit#gid=0)

[Subgraph notes](https://docs.google.com/document/d/1c2-JrZFc4WJxm_6X7Uj5kNXKNkZ_ZAzsS08Mv7UfVaw/edit?usp=sharing)

[TheGraph Docs](https://thegraph.com/docs/)

[Set Protocol V2 Contracts](https://github.com/SetProtocol/set-protocol-v2-contracts)

[Set Protocol System Diagram](https://drive.google.com/file/d/15ETEqxkjkR29GmWH4gg4ob_OW9lb_Nly/view)

[Hosted API](https://thegraph.com/explorer/subgraph/desert-defi/setprotocolv2)
